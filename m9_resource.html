<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 9: Resource Management & Slurm - Master Quiz</title>
    <style>
        :root { --hpc-purple: #4b0082; --slurm-green: #2d8a2d; --bg: #f0f2f5; --wrong: #dc3545; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); padding: 20px; color: #333; }
        .quiz-container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.15); }
        .header { border-bottom: 4px solid var(--hpc-purple); padding-bottom: 15px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; }
        .back-link { text-decoration: none; color: var(--hpc-purple); font-weight: bold; border: 2px solid var(--hpc-purple); padding: 8px 18px; border-radius: 6px; transition: 0.3s; }
        .back-link:hover { background: var(--hpc-purple); color: white; }
        
        .set-nav { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .set-btn { padding: 8px 15px; background: #eee; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; text-decoration: none; color: black; }
        .set-btn.active { background: var(--hpc-purple); color: white; border-color: var(--hpc-purple); }

        .question { margin-bottom: 25px; padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; background: #fff; }
        .question.unanswered { border-left: 6px solid var(--wrong); background: #fff5f5; }
        .q-text { font-weight: 700; font-size: 1.1rem; margin-bottom: 15px; display: block; color: #2c3e50; }
        .option { display: block; padding: 12px; background: #fdfdfd; border: 1px solid #ddd; margin: 8px 0; border-radius: 6px; cursor: pointer; transition: 0.2s; }
        .option:hover { background: #f1f1f1; border-color: var(--slurm-green); }
        
        .btn-submit { background: var(--slurm-green); color: white; border: none; padding: 18px; width: 100%; border-radius: 8px; font-size: 1.3rem; cursor: pointer; font-weight: bold; margin-top: 20px; }
        #result-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 40px; border-radius: 15px; text-align: center; width: 90%; max-width: 500px; }
        .score-box { font-size: 4rem; font-weight: bold; color: var(--slurm-green); margin: 20px 0; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="header">
        <div>
            <h1 style="margin:0;">Resource Management & Schedulers</h1>
            <p style="margin:5px 0 0; color: #666;">D-HPCSA Module 9: Slurm, Nagios, and Accounting</p>
        </div>
        <a href="index.html" class="back-link">‚Üê Dashboard</a>
    </div>

    <div class="set-nav">
        <a href="?set=1" class="set-btn" id="btn-1">Set 1</a>
        <a href="?set=2" class="set-btn" id="btn-2">Set 2</a>
        <a href="?set=3" class="set-btn" id="btn-3">Set 3</a>
        <a href="?set=4" class="set-btn" id="btn-4">Set 4</a>
        <a href="?set=5" class="set-btn" id="btn-5">Set 5</a>
    </div>

    

    <form id="quiz-form">
        <div id="questions-area"></div>
        <button type="button" class="btn-submit" onclick="validateQuiz()">Submit This Set</button>
    </form>
</div>

<div id="result-modal">
    <div class="modal-content">
        <h2>Set Performance</h2>
        <div class="score-box" id="score-display">0%</div>
        <div id="stats-summary" style="font-size: 1.2rem; margin-bottom: 20px;"></div>
        <button onclick="location.reload()" style="padding: 12px 25px; cursor: pointer; background: var(--hpc-purple); color:white; border:none; border-radius:5px;">Retake Set</button>
        <button onclick="closeModal()" style="padding: 12px 25px; cursor: pointer; margin-left:10px;">Review Answers</button>
    </div>
</div>

<script>
const quizData = {
    "1": [
        { q: "Which daemon is known as the central controller in a Slurm cluster?", o: ["slurmd", "slurmctld", "slurmdbd", "munged"], a: 1 },
        { q: "What is the primary command used to submit a batch job script?", o: ["srun", "salloc", "sbatch", "squeue"], a: 2 },
        { q: "Which command provides a real-time status of partitions and nodes?", o: ["squeue", "sinfo", "sacct", "scontrol"], a: 1 },
        { q: "In a Slurm script, which prefix is used for scheduler directives?", o: ["#SLURM", "#SBATCH", "#PBS", "#RESOURCES"], a: 1 },
        { q: "What does the command 'scancel 500' do?", o: ["Starts job 500", "Cancels job 500", "Shows status of job 500", "Cancels all jobs"], a: 1 },
        { q: "Which environment variable identifies the node list allocated to a job?", o: ["$NODES", "$SLURM_JOB_NODELIST", "$JOB_HOSTS", "$SLURM_LIST"], a: 1 },
        { q: "What does 'salloc' do?", o: ["Submits a script to queue", "Allocates resources and starts a shell", "Cancels a job", "Displays node info"], a: 1 },
        { q: "Which file is the main configuration file for Slurm?", o: ["slurm.conf", "slurm.cfg", "nodes.conf", "slurmctld.conf"], a: 0 },
        { q: "What is the state of a node that is currently executing a job?", o: ["IDLE", "ALLOCATED", "DOWN", "DRAIN"], a: 1 },
        { q: "What does 'squeue -u username' display?", o: ["User account info", "Jobs belonging to a specific user", "Node availability", "Software versions"], a: 1 },
        { q: "Which Slurm component is responsible for authentication?", o: ["LDAP", "MUNGE", "OpenSSH", "Kerberos"], a: 1 },
        { q: "How do you request 4 nodes in an sbatch script?", o: ["-n 4", "-N 4", "-nodes 4", "--total-nodes=4"], a: 1 },
        { q: "Which command is used to view detailed job accounting information?", o: ["sinfo", "squeue", "sacct", "scontrol"], a: 2 },
        { q: "What is a 'Partition' in the context of Slurm?", o: ["A disk slice", "A logical queue of nodes", "A security group", "A network subnet"], a: 1 },
        { q: "What does 'srun' do?", o: ["Submits a batch job", "Launches parallel tasks within an allocation", "Checks Slurm logs", "Restarts the daemon"], a: 1 },
        { q: "Which command reconfigures Slurm after a slurm.conf change?", o: ["scontrol reconfig", "slurm reload", "sbatch --reload", "systemctl restart slurmd"], a: 0 },
        { q: "What does the 'ST' column in squeue indicate?", o: ["State", "StartTime", "Step", "Storage"], a: 0 },
        { q: "Which flag sets a 10-minute time limit for a job?", o: ["--time=10", "-t 10:00", "-limit 10", "--timeout 10"], a: 1 },
        { q: "What does the 'PD' state stand for in squeue output?", o: ["Processing Data", "Pending (waiting for resources)", "Power Down", "Parallel Deployment"], a: 1 },
        { q: "Which command is used to manage Slurm associations and accounts?", o: ["scontrol", "sacctmgr", "sinfo", "smap"], a: 1 },
        { q: "What is 'Fairshare' in an HPC cluster?", o: ["Equal time for everyone", "Prioritizing jobs based on past usage and target share", "Selling CPU cycles", "None"], a: 1 },
        { q: "Which daemon runs on every compute node?", o: ["slurmctld", "slurmd", "slurmdbd", "systemd"], a: 1 },
        { q: "How do you request a specific partition named 'gpu'?", o: ["-n gpu", "-p gpu", "-q gpu", "--queue=gpu"], a: 1 },
        { q: "What does 'scontrol show node node01' do?", o: ["Powers off node01", "Displays detailed config and state of node01", "Lists jobs on node01", "None"], a: 1 },
        { q: "Which command allows interactive graphical monitoring of the cluster?", o: ["smap", "sview", "sinfo", "Both sview and smap"], a: 3 },
        { q: "What is 'Backfill' scheduling?", o: ["Running jobs in reverse order", "Running small jobs if they don't delay the top job", "Running jobs only at night", "None"], a: 1 },
        { q: "In a Slurm script, 'ntasks-per-node' refers to:", o: ["Nodes needed", "CPU cores to use per node", "Users allowed", "Storage size"], a: 1 },
        { q: "What does 'GRES' allow you to request?", o: ["General resources like memory", "Generic resources like GPUs or Licenses", "Grid entry points", "None"], a: 1 },
        { q: "Which command shows the expected start time for pending jobs?", o: ["squeue --start", "sinfo --time", "sacct --when", "sbatch --view"], a: 0 },
        { q: "What happens to a node in 'DRAIN' state?", o: ["It reboots", "It completes current jobs but accepts no new ones", "It deletes all user data", "It shuts down"], a: 1 },
        { q: "Which command is used to change the state of a node to 'Down'?", o: ["sinfo", "scontrol update NodeName=... State=Down", "sacctmgr", "scancel"], a: 1 },
        { q: "What is 'QOS' in Slurm?", o: ["Quality of Storage", "Quality of Service (defines job limits/priority)", "Query of System", "None"], a: 1 },
        { q: "Which environment variable gives the number of tasks in the job?", o: ["$TASKS", "$SLURM_NTASKS", "$CPU_COUNT", "$N_PROCS"], a: 1 },
        { q: "Which file logs the activity of the controller daemon?", o: ["slurmctld.log", "slurmd.log", "messages", "job.log"], a: 0 },
        { q: "The 'MaxWall' limit in a QOS refers to:", o: ["Maximum memory", "Maximum time a job can run", "Maximum nodes", "Maximum users"], a: 1 },
        { q: "What does 'sinfo -R' display?", o: ["Running jobs", "Reasons why nodes are in a non-responsive state", "RAM info", "Resource list"], a: 1 },
        { q: "Which command is used to view Slurm software version?", o: ["slurm --version", "sversion", "scontrol version", "sinfo -v"], a: 2 },
        { q: "What is the purpose of 'slurmdbd'?", o: ["Job execution", "Database daemon for job accounting/records", "Node monitoring", "Network routing"], a: 1 },
        { q: "What does 'Dependency' in sbatch allow?", o: ["Shared memory", "Starting a job only after another job completes", "Using multiple partitions", "None"], a: 1 },
        { q: "How do you request 2000MB of memory per CPU in Slurm?", o: ["--mem=2000", "--mem-per-cpu=2000", "-m 2000", "--ram=2000"], a: 1 }
    ],
    "2": [
        { q: "What is Nagios primarily used for?", o: ["Compiling code", "Infrastructure and service monitoring", "HPC Job scheduling", "Parallel File Storage"], a: 1 },
        { q: "In Nagios, which status indicates a service is functioning normally?", o: ["OK (Green)", "WARNING (Yellow)", "CRITICAL (Red)", "UNKNOWN (Orange)"], a: 0 },
        { q: "What does NRPE stand for in Nagios?", o: ["Network Resource Path Entry", "Nagios Remote Plugin Executor", "Node Remote Performance Engine", "None"], a: 1 },
        { q: "Which tool is used for visual performance graphing in HPC clusters?", o: ["Ganglia", "Vim", "SSH", "GDB"], a: 0 },
        { q: "In Ganglia, which daemon runs on the head node to aggregate data?", o: ["gmond", "gmetad", "gstat", "gmetric"], a: 1 },
        { q: "In Ganglia, 'gmond' stands for:", o: ["Ganglia Master Node", "Ganglia Monitoring Daemon", "Ganglia Monitor Display", "None"], a: 1 },
        { q: "Which protocol does SNMP use for communication?", o: ["TCP", "UDP", "ICMP", "HTTP"], a: 1 },
        { q: "What is an 'Agent' in monitoring systems?", o: ["A human observer", "Software on target node that sends data to monitor", "A hardware firewall", "None"], a: 1 },
        { q: "Which Nagios file defines the contacts for alerts?", o: ["nagios.cfg", "resource.cfg", "contacts.cfg", "commands.cfg"], a: 2 },
        { q: "What is 'Load Average' in Linux monitoring?", o: ["Total disk usage", "Average number of processes in runnable state", "RAM consumption", "Network speed"], a: 1 },
        { q: "Which Ganglia component provides the web-based UI?", o: ["gmond", "gmetad", "ganglia-web", "gweb"], a: 2 },
        { q: "What is 'Threshold' in Nagios?", o: ["The entrance", "Value at which a status changes from OK to Warning/Critical", "Network limit", "None"], a: 1 },
        { q: "Which monitoring system uses RRDtool for data storage?", o: ["Slurm", "Ganglia", "LDAP", "NFS"], a: 1 },
        { q: "What is the default port for the SNMP agent?", o: ["161", "162", "80", "443"], a: 0 },
        { q: "In Ganglia, 'gmetric' is used for:", o: ["Measuring node weight", "Sending custom metrics to gmond", "Graphing results", "None"], a: 1 },
        { q: "Which Nagios check is 'Active'?", o: ["Monitor waits for node to send data", "Monitor initiates the check on a schedule", "Manual check by admin", "None"], a: 1 },
        { q: "What is 'Passive Check' in Nagios?", o: ["Admin checks manually", "External applications send results to Nagios", "Monitor pings node", "None"], a: 1 },
        { q: "What is the Nagios 'Parent/Child' relationship used for?", o: ["File permissions", "Network reachability and suppressing redundant alerts", "User hierarchies", "None"], a: 1 },
        { q: "Which command tests Nagios configuration for errors?", o: ["nagios -v nagios.cfg", "nagios --test", "systemctl status nagios", "check_nagios"], a: 0 },
        { q: "In Ganglia, what is a 'Cluster' in the XML tree?", o: ["A single node", "A group of nodes defined in gmond.conf", "A user group", "None"], a: 1 },
        { q: "Which tool is best for log-based monitoring and analysis?", o: ["ELK (Elasticsearch, Logstash, Kibana)", "Slurm", "OpenMP", "GCC"], a: 0 },
        { q: "What does 'IOWait' indicate in CPU monitoring?", o: ["CPU is calculating", "CPU is idle waiting for disk/network I/O", "CPU is off", "None"], a: 1 },
        { q: "Which monitoring tool is 'Agentless' (can use SSH/SNMP)?", o: ["Nagios (with certain plugins)", "Zabbix", "Both", "None"], a: 2 },
        { q: "What is 'Metric' in resource management?", o: ["A unit of distance", "A standard measurement of system performance (CPU, RAM, etc)", "A type of code", "None"], a: 1 },
        { q: "Which port does NRPE usually use?", o: ["5666", "1234", "8080", "22"], a: 0 },
        { q: "What is 'Service' in Nagios terminology?", o: ["A car repair", "A specific attribute of a host being monitored (e.g., Disk Space)", "A background process", "None"], a: 1 },
        { q: "In Ganglia, how does gmond communicate with other gmonds by default?", o: ["Unicast", "Multicast", "Broadcast", "HTTP"], a: 1 },
        { q: "What is 'Soft State' in Nagios?", o: ["A physical failure", "A non-OK state that hasn't reached the retry limit yet", "A software bug", "None"], a: 1 },
        { q: "What is 'Hard State' in Nagios?", o: ["A confirmed failure after multiple retries", "A frozen screen", "A crash", "None"], a: 0 },
        { q: "Which command shows current CPU and Memory usage in real-time in Linux?", o: ["ls", "top or htop", "df", "ps"], a: 1 },
        { q: "What is 'Uptime'?", o: ["Time since last login", "Duration since the system was last booted", "Total work hours", "None"], a: 1 },
        { q: "What is 'Bandwidth' in monitoring?", o: ["Thickness of a wire", "Maximum data transfer rate of a network path", "Frequency of sound", "None"], a: 1 },
        { q: "What is 'Throughput'?", o: ["Network capacity", "Actual amount of data successfully transferred", "Delay in network", "None"], a: 1 },
        { q: "What does 'Latency' measure?", o: ["Speed of data", "Delay in data transmission", "Volume of data", "None"], a: 1 },
        { q: "Which Nagios UI component provides a visual of the network hierarchy?", o: ["Tactical Overview", "Map", "Service Detail", "Host Detail"], a: 1 },
        { q: "In Slurm, which daemon manages the accounting database?", o: ["slurmd", "slurmctld", "slurmdbd", "munged"], a: 2 },
        { q: "Which command is used to add a new cluster to Slurm database?", o: ["scontrol", "sacctmgr add cluster <name>", "sinfo", "slurmdbd --add"], a: 1 },
        { q: "What is the default monitoring interval in many systems?", o: ["5 minutes", "1 hour", "1 second", "Once a day"], a: 0 },
        { q: "What is 'Flapping' in Nagios?", o: ["Birds flying", "A service changing state too frequently", "A network crash", "None"], a: 1 },
        { q: "Which metric tracks the number of context switches in a CPU?", o: ["Interrupts", "Context Switches", "Wait Time", "User Time"], a: 1 }
    ],
    "3": [
        { q: "Which file determines which Slurm users belong to which accounts?", o: ["slurm.conf", "Slurm Accounting Database", "LDAP", "users.txt"], a: 1 },
        { q: "What is the command to see 'Fairshare' values for all users?", o: ["sinfo", "sshare", "squeue", "scontrol"], a: 1 },
        { q: "How do you specify a job dependency in sbatch?", o: ["--depend=id", "--dependency=afterok:jobid", "-d jobid", "--after jobid"], a: 1 },
        { q: "What does 'CPU Affinity' mean?", o: ["Liking a CPU", "Binding a process to a specific CPU core", "Overclocking", "None"], a: 1 },
        { q: "Which Slurm command allows you to view the configuration of the controller?", o: ["scontrol show config", "sinfo -c", "slurm -v", "cat slurm.conf"], a: 0 },
        { q: "What is 'Over-subscription' of CPUs?", o: ["Running multiple tasks on a single core", "Buying too many CPUs", "Using a GPU as CPU", "None"], a: 0 },
        { q: "In Slurm, what is a 'Step' in a job?", o: ["A stair", "A specific srun execution within a job allocation", "A reboot", "None"], a: 1 },
        { q: "Which parameter controls how long a node stays in 'Down' state before check?", o: ["ReturnToService", "NodeTimeout", "Heartbeat", "SlurmctldTimeout"], a: 0 },
        { q: "What command displays the current Slurm partitions?", o: ["squeue", "sinfo", "scontrol show partitions", "Both B and C"], a: 3 },
        { q: "How do you request 100GB of memory for the whole job?", o: ["--mem=100G", "--mem-per-cpu=100G", "-m 100", "--total-mem=100"], a: 0 },
        { q: "What is the purpose of 'AccountingStorageType' in slurm.conf?", o: ["Database type", "Specifies where job records are kept (e.g., slurmdbd)", "Storage for user files", "None"], a: 1 },
        { q: "Which command provides a 'User' centric view of resource usage?", o: ["sinfo", "sshare", "sacct", "Both B and C"], a: 3 },
        { q: "What is 'Gang Scheduling' in Slurm?", o: ["One user taking over", "Time-slicing multiple parallel jobs on same nodes", "Collaborative scheduling", "None"], a: 1 },
        { q: "What is a 'Reservation' in Slurm?", o: ["Booking a node for a specific time and user/group", "A backup node", "A node for admins only", "None"], a: 0 },
        { q: "Which command creates a reservation?", o: ["scontrol create reservation", "sreserve", "sbatch --reserve", "sacctmgr add res"], a: 0 },
        { q: "What does 'PriorityType=priority/multifactor' enable?", o: ["Simple FIFO", "Complex priority based on Fairshare, Age, Size, etc.", "Random priority", "None"], a: 1 },
        { q: "The 'Age' factor in Slurm priority refers to:", o: ["Age of the server", "How long the job has been waiting in the queue", "Age of the user", "None"], a: 1 },
        { q: "How do you submit a job that should only run after Job 101 finishes successfully?", o: ["sbatch --depend=101", "sbatch --dependency=afterok:101", "sbatch --after=101", "srun --follow=101"], a: 1 },
        { q: "Which command shows the limits (QOS) applied to a user?", o: ["squeue", "sacctmgr show user <name> withassoc", "sinfo", "scontrol"], a: 1 },
        { q: "What is 'Checkpointing' in HPC?", o: ["Security check", "Saving the state of a job to resume later", "Checking for bugs", "None"], a: 1 },
        { q: "What does the 'smap -j' command show?", o: ["Node status", "Job status in a grid-like view", "Storage map", "User list"], a: 1 },
        { q: "Which Slurm parameter prevents a job from being scheduled on nodes with existing jobs?", o: ["Exclusive", "Shared", "Dedicated", "Private"], a: 0 },
        { q: "How do you request an 'Exclusive' node allocation?", o: ["--exclusive", "-x", "--nodes-only", "--private"], a: 0 },
        { q: "What is the command to view all available QOS levels?", o: ["sinfo", "sacctmgr show qos", "scontrol show qos", "squeue -q"], a: 1 },
        { q: "Which daemon handles the 'Prolog' and 'Epilog' scripts on nodes?", o: ["slurmctld", "slurmd", "slurmdbd", "bash"], a: 1 },
        { q: "What is a 'Prolog' script in Slurm?", o: ["A summary", "A script that runs before a job starts to prepare the node", "A logging tool", "None"], a: 1 },
        { q: "What is an 'Epilog' script in Slurm?", o: ["An introduction", "A script that runs after a job ends to clean up the node", "A backup script", "None"], a: 1 },
        { q: "How can you see why your job is waiting (Reason)?", o: ["sinfo", "squeue", "sacct", "scontrol"], a: 1 },
        { q: "What does 'Priority' 0 mean for a job?", o: ["Highest priority", "Job is held and will not run", "Average priority", "None"], a: 1 },
        { q: "Which command releases a held job?", o: ["srelease", "scontrol release <jobid>", "sbatch --resume", "scancel --start"], a: 1 },
        { q: "What is 'Preemption'?", o: ["Stopping a high-priority job", "Suspending/killing a low-priority job to run a high-priority one", "Buying nodes", "None"], a: 1 },
        { q: "Which setting in slurm.conf defines the scheduler algorithm?", o: ["SchedulerType", "SelectType", "PriorityType", "All of these"], a: 3 },
        { q: "What does 'SelectType=select/cons_res' allow Slurm to manage?", o: ["Whole nodes only", "Individual CPUs and Memory as consumable resources", "Software licenses", "None"], a: 1 },
        { q: "How do you check the version of Slurm running on the cluster?", o: ["slurm -v", "scontrol version", "sinfo --version", "Both B and C"], a: 3 },
        { q: "What is 'TRES' in Slurm Accounting?", o: ["Total Resource System", "Trackable Resources (CPU, Mem, Energy, etc)", "Task Resource Entry", "None"], a: 1 },
        { q: "Which command shows the current associations for an account?", o: ["sacctmgr show assoc", "sinfo", "scontrol", "sshare"], a: 0 },
        { q: "What is 'Burst Buffer'?", o: ["A network error", "Fast storage tier (like NVMe) used to accelerate I/O", "A CPU cache", "None"], a: 1 },
        { q: "Which command is used to move a job to a different partition?", o: ["scontrol update jobid=<id> Partition=<name>", "sbatch --move", "squeue --change", "sacctmgr move"], a: 0 },
        { q: "What does 'sstat -j <jobid>' provide?", o: ["Historical data", "Status of a currently running job (e.g., memory used now)", "Node list", "None"], a: 1 },
        { q: "Which environment variable gives the Slurm Partition name in a script?", o: ["$PARTITION", "$SLURM_JOB_PARTITION", "$QUEUE_NAME", "$SLURM_P"], a: 1 }
    ],
    "4": [
        { q: "What is the primary difference between Nagios and Ganglia?", o: ["Nagios is for Big Data", "Nagios is for alerting/status, Ganglia is for performance metrics/graphing", "Ganglia is for job scheduling", "None"], a: 1 },
        { q: "In Nagios, what is a 'Host Group'?", o: ["A group of users", "A logical collection of hosts (e.g., Web Servers)", "A group of disks", "None"], a: 1 },
        { q: "Which tool is commonly used to monitor 'GPU' usage in clusters?", o: ["NVIDIA-SMI / Ganglia plugins", "Slurm", "LDAP", "Vim"], a: 0 },
        { q: "In Slurm, what is a 'Cluster' in a multi-cluster setup?", o: ["A single node", "A set of nodes managed by one slurmctld", "A group of users", "None"], a: 1 },
        { q: "Which command shows the status of Slurm daemons on the local node?", o: ["systemctl status slurmd", "scontrol status", "sinfo", "ps -ef | grep slurm"], a: 0 },
        { q: "What is 'Resource Quota'?", o: ["A speed limit", "Limit on resources a user can consume in a time period", "A type of CPU", "None"], a: 1 },
        { q: "Which metric is most useful for detecting a 'Memory Leak'?", o: ["CPU Load", "Constant increase in Memory Usage over time", "Network I/O", "Uptime"], a: 1 },
        { q: "What is 'Zabbix'?", o: ["A game", "An enterprise-grade open source monitoring solution", "A Slurm plugin", "None"], a: 1 },
        { q: "Which monitoring tool uses 'Items' and 'Triggers' as its core concepts?", o: ["Nagios", "Zabbix", "Ganglia", "Slurm"], a: 1 },
        { q: "What is 'SNMP Trap'?", o: ["A security flaw", "An unsolicited message sent from device to monitor upon an event", "A network switch", "None"], a: 1 },
        { q: "Which SNMP version is considered the most secure?", o: ["v1", "v2c", "v3 (supports encryption/auth)", "v4"], a: 2 },
        { q: "What is 'MIB' in SNMP?", o: ["Management Information Base (defines data points)", "Memory in Bytes", "Main Infrastructure Board", "None"], a: 0 },
        { q: "What does 'Downtime' in Nagios allow you to do?", o: ["Shutdown servers", "Suppress alerts for a scheduled maintenance window", "Reboot nodes", "None"], a: 1 },
        { q: "Which command line tool is used to query an SNMP agent manually?", o: ["snmpget / snmpwalk", "ssh", "ping", "sinfo"], a: 0 },
        { q: "What is 'Agentless' monitoring?", o: ["No monitoring", "Monitoring via standard protocols (SSH/WMI/SNMP) without proprietary software", "Using a human", "None"], a: 1 },
        { q: "In Ganglia, data is stored in which format?", o: ["SQL", "XML (transmitted) / RRD (stored)", "JSON", "Plain Text"], a: 1 },
        { q: "Which Slurm parameter allows multiple jobs to share a node?", o: ["SelectTypeParameters=shared", "SelectTypeParameters=CR_Core_Memory", "Shared=YES", "None"], a: 1 },
        { q: "What is 'Slurm Topology' awareness?", o: ["Mapping users", "Optimizing job placement based on network switch layout", "Mapping storage", "None"], a: 1 },
        { q: "Which command reloads the Slurm partitions and nodes without restarting?", o: ["scontrol reconfigure", "sinfo reload", "sbatch --refresh", "systemctl reload slurm"], a: 0 },
        { q: "What is 'Wallclock Time' in HPC?", o: ["CPU time", "Real elapsed time (start to end)", "Time of day", "None"], a: 1 },
        { q: "Which Slurm log records job completions and errors?", o: ["slurmctld.log", "Job output file (e.g., slurm-123.out)", "syslog", "None"], a: 1 },
        { q: "What is the result of 'squeue -t R'?", o: ["List of all jobs", "List of jobs in Running state", "List of jobs in Pending state", "List of jobs on node R"], a: 1 },
        { q: "How do you request a specific amount of memory per node?", o: ["--mem=10G", "--mem-per-cpu=10G", "--min-mem=10G", "-m 10"], a: 0 },
        { q: "What is 'Job Submission Filter' in Slurm?", o: ["A virus scanner", "A script that validates or modifies jobs before they enter the queue", "A network firewall", "None"], a: 1 },
        { q: "Which daemon handles Munge authentication?", o: ["slurmd", "munged", "slurmctld", "authd"], a: 1 },
        { q: "What is 'Mungetime' error usually caused by?", o: ["Too many jobs", "Clock skew (time out of sync) between nodes", "Slow network", "None"], a: 1 },
        { q: "Which command shows the 'Usage' (CPU hours) of a user for a month?", o: ["sinfo", "sshare", "sacctmgr show usage", "scontrol"], a: 2 },
        { q: "What is 'CPU Load' in monitoring?", o: ["Weight of CPU", "Number of processes using or waiting for CPU", "Speed of CPU", "None"], a: 1 },
        { q: "Which metric tracks the number of bytes read/written to disk?", o: ["CPU Usage", "Disk I/O (Throughput)", "RAM usage", "Swap usage"], a: 1 },
        { q: "In Nagios, 'Check_Ping' is what type of check?", o: ["Network Layer", "Application Layer", "Hardware Layer", "None"], a: 0 },
        { q: "What is 'Notification Interval' in Nagios?", o: ["How fast a service runs", "How often to resend an alert if problem persists", "Time to reboot", "None"], a: 1 },
        { q: "Which command displays the current 'Slurm' configuration parameters?", o: ["scontrol show config", "sinfo -c", "slurm.conf", "sacctmgr show config"], a: 0 },
        { q: "What does 'salloc -p gpu' do?", o: ["Submits a GPU job", "Gives interactive shell with GPU resources", "Cancels GPU jobs", "None"], a: 1 },
        { q: "How can you tell which Slurm partitions are currently 'Down'?", o: ["squeue", "sinfo", "sacct", "scontrol"], a: 1 },
        { q: "In a 'Shared Memory' HPC node, what is the key resource to manage?", o: ["Cores and RAM", "Network switches", "IP addresses", "None"], a: 0 },
        { q: "What is 'Heterogeneous' computing in Slurm?", o: ["Different users", "Single job using multiple types of nodes (e.g., CPU + GPU)", "Different software", "None"], a: 1 },
        { q: "Which command identifies the 'Reason' why a node is in 'Drain' state?", o: ["sinfo -R", "squeue", "sacct", "scontrol show node"], a: 0 },
        { q: "What is 'Slurmdbd' database usually?", o: ["SQLite", "MySQL / MariaDB", "PostgreSQL", "MongoDB"], a: 1 },
        { q: "Which command checks the connectivity between Slurm daemons?", o: ["scontrol ping", "slurm test", "ping slurmd", "sinfo -p"], a: 0 },
        { q: "What is 'Accounting' in HPC?", o: ["Paying taxes", "Tracking resource consumption (CPU hours) for billing or reporting", "Calculating math", "None"], a: 1 }
    ],
    "5": [
        { q: "Which command would you use to find out which nodes are currently IDLE?", o: ["squeue", "sinfo -t IDLE", "scontrol show idle", "sacct"], a: 1 },
        { q: "What is the primary purpose of a 'Job Scheduler'?", o: ["To write code", "To manage and allocate cluster resources to users", "To monitor temperature", "None"], a: 1 },
        { q: "In Slurm, what does '--ntasks-per-node=8' specify?", o: ["8 total tasks", "8 tasks for every node in the job", "8 users per node", "8 nodes per task"], a: 1 },
        { q: "What does the 'PriorityWeightAge' parameter in slurm.conf control?", o: ["The cost of nodes", "How much job wait time contributes to priority", "The age of the CPU", "None"], a: 1 },
        { q: "Which tool can be used to monitor Slurm jobs via a web interface?", o: ["Slurm-web / Open OnDemand", "Vim", "SSH", "Bash"], a: 0 },
        { q: "What is 'Job Preemption'?", o: ["Running a job early", "Interrupting a low priority job to start a higher priority one", "Deleting a job", "None"], a: 1 },
        { q: "Which command reloads the 'slurmdbd.conf' file?", o: ["scontrol reconfig", "systemctl reload slurmdbd", "sacctmgr reload", "slurmdbd --reload"], a: 1 },
        { q: "What is 'Fair Tree' in Slurm?", o: ["A green tree", "An improved fairshare algorithm for deep account hierarchies", "A network topology", "None"], a: 1 },
        { q: "Which environment variable gives the Job Name in a Slurm script?", o: ["$NAME", "$SLURM_JOB_NAME", "$JOB_TITLE", "$SCRIPT_NAME"], a: 1 },
        { q: "What does 'sbatch --mail-type=END' do?", o: ["Deletes email", "Sends an email when the job finishes", "Ends the job", "None"], a: 1 },
        { q: "How do you request a specific node by its hostname?", o: ["-w node01", "-node node01", "-n node01", "--target=node01"], a: 0 },
        { q: "What is the result of 'scontrol hold <jobid>'?", o: ["Job starts immediately", "Job is prevented from starting until released", "Job is cancelled", "Node is shut down"], a: 1 },
        { q: "In Nagios, what is 'Escalation'?", o: ["Going up stairs", "Sending alerts to more senior staff if problem isn't fixed", "Increasing priority", "None"], a: 1 },
        { q: "Which file contains the password for the Slurm database?", o: ["slurm.conf", "slurmdbd.conf", "my.cnf", "passwd"], a: 1 },
        { q: "What is 'Metric Threading' in Ganglia?", o: ["Using multiple CPUs", "How gmond handles multiple data updates", "Networking", "None"], a: 1 },
        { q: "Which tool is often used to manage 'Lustre' file system monitoring?", o: ["Slurm", "IML (Integrated Manager for Lustre)", "Nagios", "Python"], a: 1 },
        { q: "What does 'sinfo -l' display?", o: ["Lists all jobs", "Long version of node info (includes CPUs, RAM, Sockets)", "Large nodes", "None"], a: 1 },
        { q: "What is 'Munge'?", o: ["A food", "Authentication service for creating and validating credentials", "A scheduler", "None"], a: 1 },
        { q: "Which Slurm state means a node is not responding?", o: ["DOWN*", "IDLE", "REBOOT", "POWER_SAVE"], a: 0 },
        { q: "What does 'squeue --start -j <jobid>' show?", o: ["Current time", "Estimated start time for a pending job", "Job history", "None"], a: 1 },
        { q: "Which Slurm command shows current 'Limits' (e.g. MaxNodes) for an account?", o: ["sacctmgr show assoc", "sinfo", "squeue", "scontrol"], a: 0 },
        { q: "What is 'Throughput' in an HPC network?", o: ["Delay", "Rate of successful data delivery over a channel", "Cable length", "None"], a: 1 },
        { q: "Which Nagios component actually performs the check?", o: ["Core Engine", "Plugins", "Web Interface", "Scheduler"], a: 1 },
        { q: "What is 'Service Dependency' in Nagios?", o: ["Stopping a service", "Making one service check dependent on another (e.g. don't check HTTP if Ping fails)", "A virus", "None"], a: 1 },
        { q: "What is the primary benefit of Slurm 'Partitions'?", o: ["Grouping nodes for different user needs (e.g. debug, production, gpu)", "Formatting disks", "Naming users", "None"], a: 0 },
        { q: "How do you specify the 'Account' for a job in Slurm?", o: ["-a <account>", "-u <user>", "--account=<name>", "Both A and C"], a: 3 },
        { q: "What is 'Resource Accounting' important for?", o: ["User passwords", "Tracking who used what for how long (auditing/billing)", "Network routing", "None"], a: 1 },
        { q: "Which command shows the 'Cluster' name in Slurm?", o: ["sinfo", "scontrol show config | grep ClusterName", "sacctmgr show cluster", "Both B and C"], a: 3 },
        { q: "What is the 'Default' partition in Slurm?", o: ["The partition used if none is specified by the user", "The GPU partition", "The admin partition", "None"], a: 0 },
        { q: "Which command displays the CPUs and Memory per node in sinfo?", o: ["sinfo -N -l", "sinfo -c", "sinfo -m", "squeue"], a: 0 },
        { q: "What is 'Time Limit' in Slurm used for?", o: ["To end the day", "To automatically kill jobs that exceed their requested duration", "To set the system clock", "None"], a: 1 },
        { q: "In Nagios, what is the 'Tactical Overview'?", o: ["A map of the city", "A summary page showing total counts of OK/Warning/Critical", "The command line", "None"], a: 1 },
        { q: "What is 'Collectd'?", o: ["A storage tool", "A system statistics collection daemon", "A Slurm daemon", "None"], a: 1 },
        { q: "Which tool provides a real-time dashboard for 'Slurm' cluster activity?", o: ["Slurm-Dashboard / Grafana", "Excel", "Vim", "None"], a: 0 },
        { q: "What is 'Job Requeue' in Slurm?", o: ["Deleting a job", "Restarting a job after a node failure or preemption", "Submitting a job twice", "None"], a: 1 },
        { q: "Which command updates the 'Priority' of a job manually (Admin only)?", o: ["scontrol update jobid=<id> priority=<val>", "sbatch --prio", "sacctmgr", "sinfo"], a: 0 },
        { q: "What does 'scontrol show node' tell you about 'Cores'?", o: ["Number of sockets, cores per socket, and threads per core", "Total RAM", "OS version", "None"], a: 0 },
        { q: "What is 'Node Failover'?", o: ["Crashing a node", "Moving tasks from a failed node to a healthy one", "Rebooting", "None"], a: 1 },
        { q: "What is the 'State' of a job that just finished?", o: ["RUNNING", "COMPLETED", "FAILED", "CANCELLED"], a: 1 },
        { q: "The 'M' in SLURM stands for:", o: ["Management", "Monitoring", "Main", "Member"], a: 0 }
    ]
};

// --- QUIZ LOGIC ---
const urlParams = new URLSearchParams(window.location.search);
const setId = urlParams.get('set') || "1";
document.querySelectorAll('.set-btn').forEach(btn => btn.classList.remove('active'));
if(document.getElementById(`btn-${setId}`)) document.getElementById(`btn-${setId}`).classList.add('active');

const questionsArea = document.getElementById('questions-area');
const activeQs = quizData[setId];

if(activeQs) {
    activeQs.forEach((item, idx) => {
        let html = `<div class="question" id="q-block-${idx}">
            <span class="q-text">${idx + 1}. ${item.q}</span>`;
        item.o.forEach((opt, i) => {
            html += `<label class="option">
                <input type="radio" name="q${idx}" value="${i}" onclick="clearMark(${idx})"> ${opt}
            </label>`;
        });
        html += `</div>`;
        questionsArea.innerHTML += html;
    });
}

function clearMark(idx) {
    document.getElementById(`q-block-${idx}`).classList.remove('unanswered');
}

function validateQuiz() {
    let missing = 0;
    activeQs.forEach((_, idx) => {
        if (!document.querySelector(`input[name="q${idx}"]:checked`)) {
            missing++;
            document.getElementById(`q-block-${idx}`).classList.add('unanswered');
        }
    });

    if (missing > 0) {
        alert("Wait! " + missing + " questions are unanswered.");
        document.querySelector('.unanswered').scrollIntoView({ behavior: 'smooth', block: 'center' });
    } else {
        calculateScore();
    }
}

function calculateScore() {
    let score = 0, correct = 0, wrong = 0;
    activeQs.forEach((item, idx) => {
        const selected = document.querySelector(`input[name="q${idx}"]:checked`).value;
        if (parseInt(selected) === item.a) { score += 3; correct++; } else { score -= 1; wrong++; }
    });

    const totalPoints = activeQs.length * 3;
    const percentage = ((correct / activeQs.length) * 100).toFixed(1);
    
    document.getElementById('score-display').innerText = percentage + "%";
    document.getElementById('stats-summary').innerHTML = `
        Correct: <b style="color:green">${correct}</b> | 
        Wrong: <b style="color:red">${wrong}</b><br>
        <small>Total Points: ${score} / ${totalPoints}</small>
    `;
    document.getElementById('result-modal').style.display = 'flex';
}

function closeModal() {
    document.getElementById('result-modal').style.display = 'none';
    window.scrollTo({top: 0, behavior: 'smooth'});
}
</script>
</body>
</html>